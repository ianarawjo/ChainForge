{"version":3,"file":"luminance.cjs","sources":["../../../../../src/core/MantineProvider/color-functions/luminance/luminance.ts"],"sourcesContent":["import { toRgba } from '../to-rgba/to-rgba';\n\nfunction gammaCorrect(c: number) {\n  return c <= 0.03928 ? c / 12.92 : ((c + 0.055) / 1.055) ** 2.4;\n}\n\nfunction getLightnessFromOklch(oklchColor: string) {\n  const match = oklchColor.match(/oklch\\((.*?)%\\s/);\n  return match ? parseFloat(match[1]) : null;\n}\n\nexport function luminance(color: string): number {\n  if (color.startsWith('oklch(')) {\n    return (getLightnessFromOklch(color) || 0) / 100;\n  }\n\n  const { r, g, b } = toRgba(color);\n\n  const sR = r / 255;\n  const sG = g / 255;\n  const sB = b / 255;\n\n  const rLinear = gammaCorrect(sR);\n  const gLinear = gammaCorrect(sG);\n  const bLinear = gammaCorrect(sB);\n\n  return 0.2126 * rLinear + 0.7152 * gLinear + 0.0722 * bLinear;\n}\n\nexport function isLightColor(color: string, luminanceThreshold = 0.179) {\n  if (color.startsWith('var(')) {\n    return false;\n  }\n\n  return luminance(color) > luminanceThreshold;\n}\n"],"names":["toRgba"],"mappings":";;;;AAEA,SAAS,aAAa,CAAW,EAAA;AAC/B,EAAA,OAAO,KAAK,OAAU,GAAA,CAAA,GAAI,KAAU,GAAA,CAAA,CAAA,CAAA,GAAI,SAAS,KAAU,KAAA,GAAA;AAC7D;AAEA,SAAS,sBAAsB,UAAoB,EAAA;AACjD,EAAM,MAAA,KAAA,GAAQ,UAAW,CAAA,KAAA,CAAM,iBAAiB,CAAA;AAChD,EAAA,OAAO,KAAQ,GAAA,UAAA,CAAW,KAAM,CAAA,CAAC,CAAC,CAAI,GAAA,IAAA;AACxC;AAEO,SAAS,UAAU,KAAuB,EAAA;AAC/C,EAAI,IAAA,KAAA,CAAM,UAAW,CAAA,QAAQ,CAAG,EAAA;AAC9B,IAAQ,OAAA,CAAA,qBAAA,CAAsB,KAAK,CAAA,IAAK,CAAK,IAAA,GAAA;AAAA;AAG/C,EAAA,MAAM,EAAE,CAAG,EAAA,CAAA,EAAG,CAAE,EAAA,GAAIA,cAAO,KAAK,CAAA;AAEhC,EAAA,MAAM,KAAK,CAAI,GAAA,GAAA;AACf,EAAA,MAAM,KAAK,CAAI,GAAA,GAAA;AACf,EAAA,MAAM,KAAK,CAAI,GAAA,GAAA;AAEf,EAAM,MAAA,OAAA,GAAU,aAAa,EAAE,CAAA;AAC/B,EAAM,MAAA,OAAA,GAAU,aAAa,EAAE,CAAA;AAC/B,EAAM,MAAA,OAAA,GAAU,aAAa,EAAE,CAAA;AAE/B,EAAA,OAAO,MAAS,GAAA,OAAA,GAAU,MAAS,GAAA,OAAA,GAAU,MAAS,GAAA,OAAA;AACxD;AAEgB,SAAA,YAAA,CAAa,KAAe,EAAA,kBAAA,GAAqB,KAAO,EAAA;AACtE,EAAI,IAAA,KAAA,CAAM,UAAW,CAAA,MAAM,CAAG,EAAA;AAC5B,IAAO,OAAA,KAAA;AAAA;AAGT,EAAO,OAAA,SAAA,CAAU,KAAK,CAAI,GAAA,kBAAA;AAC5B;;;;;"}